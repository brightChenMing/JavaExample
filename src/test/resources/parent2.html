<html>
<body>
<iframe width="100%" height="800px"></iframe>
<script
        src="https://code.jquery.com/jquery-2.2.4.min.js"
        integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
        crossorigin="anonymous"></script>
<script>
    $(function () {
        $('iframe').load(function () {
            /*$(this).contents().find("body").on('click', function (event) {
                alert('test');
            });*/
            $(this).contents().find("body").bind('mouseup', function(e){
                console.log("in mouseup");
                var selection;
                var iframe1=$('iframe');
                var win = iframe1[0].contentWindow || iframe;
                var doc = iframe1[0].contentDocument;
                if (win.getSelection) {
                    selection = win.getSelection();
                } else if (doc.selection) {
                    selection = doc.selection.createRange();

                }

                selection.toString() !== '' && alert('"' + selection.toString() + '" was selected at ' + e.pageX + '/' + e.pageY);
            });
        });
        $('iframe').attr("src", "1.html");
        /*$(document.body).bind('mouseup', function(e){
            var selection;

            if (window.getSelection) {
                selection = window.getSelection();
            } else if (document.selection) {
                selection = document.selection.createRange();
            }

            selection.toString() !== '' && alert('"' + selection.toString() + '" was selected at ' + e.pageX + '/' + e.pageY);
        });*/
    });
</script>
</body>
</html>
